# VibeCForms

**VibeCForms** is an open-source project in Python that explores the concept of **Vibe Coding** ‚Äî programming conducted with Artificial Intelligence.
The project demonstrates how to build a **dynamic form management system** using **only free tools**, with code and tests generated primarily by AI. It features JSON-based form specifications, hierarchical navigation, and a modern web interface.

---

## üéØ Project Goals
- Explore **Vibe Coding**: coding guided by AI prompts and iterations.  
- Show how to build a working project even as a beginner.  
- Document prompts, results, and learning process as a **guide for others**.  
- Provide a base that can evolve from a **simple form** to **dynamic forms**.  

---

## üõ†Ô∏è Tech Stack
- **Python**
- **Flask** (web framework)
- **pytest** (unit testing)
- **SQLite** (embedded database)
- **dotenv** (environment management)
- **VSCode**
- **GitHub Copilot (free version)**
- **ChatGPT (Support and Consulting)** 

---

## üöß Current Status
- ‚úÖ First version completed: **simple contact form with CRUD** (create, read, update, delete).
- ‚úÖ Unit tests implemented with `pytest` (41 tests passing).
- ‚úÖ Validations included (no empty records, required name/phone).
- üé® Styled with CSS + icons (FontAwesome).

### Latest: Version 3.0 - Pluggable Persistence System
- ‚úÖ **Multi-Backend Support (8 backends)**
  - TXT, SQLite, MySQL, PostgreSQL, MongoDB, CSV, JSON, XML
  - Configurable via `persistence.json`
  - Repository Pattern + Adapter Pattern architecture
  - Factory Pattern for dynamic repository instantiation

- ‚úÖ **Automatic Backend Migration**
  - Detects backend changes automatically
  - User confirmation for migrations with data
  - Complete data migration between backends
  - Automatic backup before migrations
  - Successfully migrated 40 records (contatos: 23, produtos: 17)

- ‚úÖ **Schema Change Detection**
  - MD5 hash-based spec change detection
  - Automatic schema history tracking
  - 4 change types: ADD_FIELD, REMOVE_FIELD, CHANGE_TYPE, CHANGE_REQUIRED
  - Data loss prevention with confirmation dialogs

- ‚úÖ **Comprehensive Test Coverage**
  - 29 new tests (41 total passing, 4 skipped)
  - SQLite adapter tests (10 tests)
  - Backend migration tests (6 tests)
  - Schema change detection tests (13 tests)

- ‚úÖ **Complete Documentation**
  - New `docs/Manual.md` (470+ lines)
  - Complete JSON configuration guide
  - All 8 backends documented with examples
  - Migration workflows and best practices

### Recent Improvements (Version 2.1)
- ‚úÖ **Icon Support in Form Specs**
  - Custom icons per form via JSON spec files
  - Icons display in menu and landing page cards
  - No more hardcoded icon mappings

- ‚úÖ **Folder Configuration System**
  - `_folder.json` files for category customization
  - Custom names, descriptions, icons, and display order
  - Declarative configuration without code changes

- ‚úÖ **Template System**
  - Separation of HTML templates from Python code
  - Jinja2 templates in dedicated `src/templates/` directory
  - Reduced VibeCForms.py from 925 to 587 lines (-36.5%)
  - Better maintainability and follows Flask best practices

### Core Features
- ‚úÖ **Dynamic form generation**
  - Forms are generated from JSON spec files
  - URL-based routing with support for nested paths (e.g., `/contatos`, `/financeiro/contas`)
  - **Complete HTML5 field type support (20 types)**: text, email, tel, number, password, url, search, date, time, datetime-local, month, week, color, range, select, radio, checkbox, textarea, hidden, and search with autocomplete
  - Automatic validation based on specs

- ‚úÖ **Modern Navigation System**
  - üè† Main landing page with dynamic form cards
  - üìã Persistent sidebar menu with hierarchical navigation
  - üìÅ Multi-level submenu support (folders as categories)
  - üéØ Active item highlighting
  - üîÑ Automatic directory scanning for form discovery
  - üé® Custom icons for forms and folders  

---

## üìÇ Repository Structure
```
VibeCForms/
‚îÇ
‚îú‚îÄ‚îÄ src/                           # Main source code
‚îÇ   ‚îú‚îÄ‚îÄ VibeCForms.py             # Main application (587 lines)
‚îÇ   ‚îú‚îÄ‚îÄ persistence/              # Pluggable persistence system (NEW v3.0)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base_repository.py    # BaseRepository interface
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ repository_factory.py # Factory for repository instantiation
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ migration_manager.py  # Backend migration manager
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schema_detector.py    # Schema change detection
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ adapters/             # Backend implementations
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ txt_adapter.py    # TXT backend (refactored)
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ sqlite_adapter.py # SQLite backend (new)
‚îÇ   ‚îú‚îÄ‚îÄ config/                   # Configuration files (NEW v3.0)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ persistence.json      # Backend configurations
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ schema_history.json   # Automatic schema tracking
‚îÇ   ‚îú‚îÄ‚îÄ backups/                  # Automatic backups (NEW v3.0)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ migrations/           # Migration backups
‚îÇ   ‚îú‚îÄ‚îÄ templates/                # Jinja2 HTML templates
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.html            # Landing page template
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ form.html             # Main CRUD form template
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ edit.html             # Edit form template
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ fields/               # Field-specific templates
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ input.html        # Input field template
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ textarea.html     # Textarea template
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ checkbox.html     # Checkbox template
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ select.html       # Select dropdown template
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ radio.html        # Radio button template
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ color.html        # Color picker template
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ range.html        # Range slider template
‚îÇ   ‚îú‚îÄ‚îÄ specs/                    # Form specification files (JSON)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ contatos.json         # Contacts form spec (with icon)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ produtos.json         # Products form spec (with icon)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ formulario_completo.json # Complete field types demo
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ usuarios.json         # User registration form
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ financeiro/           # Financial forms category
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ _folder.json      # Folder configuration
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ contas.json       # Accounts form
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ pagamentos.json   # Payments form
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ rh/                   # HR forms category
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ _folder.json      # Folder configuration
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ funcionarios.json # Employees form
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ departamentos/    # Departments subcategory
‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ _folder.json  # Subfolder configuration
‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ areas.json    # Areas form
‚îÇ   ‚îú‚îÄ‚îÄ vibecforms.db             # SQLite database (generated)
‚îÇ   ‚îú‚îÄ‚îÄ contatos.txt              # Contact data storage (TXT backend)
‚îÇ   ‚îú‚îÄ‚îÄ produtos.txt              # Product data storage (TXT backend)
‚îÇ   ‚îú‚îÄ‚îÄ financeiro_contas.txt     # Financial accounts data
‚îÇ   ‚îî‚îÄ‚îÄ rh_funcionarios.txt       # HR employees data
‚îÇ
‚îú‚îÄ‚îÄ tests/                         # Unit tests (41 tests passing)
‚îÇ   ‚îú‚îÄ‚îÄ test_form.py              # Original form tests (16 tests)
‚îÇ   ‚îú‚îÄ‚îÄ test_sqlite_adapter.py    # SQLite adapter tests (10 tests)
‚îÇ   ‚îú‚îÄ‚îÄ test_backend_migration.py # Migration tests (6 tests)
‚îÇ   ‚îî‚îÄ‚îÄ test_change_detection.py  # Schema change tests (13 tests)
‚îÇ
‚îú‚îÄ‚îÄ docs/                          # Documentation
‚îÇ   ‚îú‚îÄ‚îÄ Manual.md                 # JSON configuration manual (NEW v3.0)
‚îÇ   ‚îú‚îÄ‚îÄ prompts.md                # All prompts with detailed results
‚îÇ   ‚îú‚îÄ‚îÄ learning_notes.md         # Learning notes and reflections
‚îÇ   ‚îú‚îÄ‚îÄ roadmap.md                # Future evolution plan
‚îÇ   ‚îú‚îÄ‚îÄ dynamic_forms.md          # Dynamic forms guide
‚îÇ   ‚îî‚îÄ‚îÄ plano_persistencia.md     # Persistence system plan (v3.0)
‚îÇ
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ CHANGELOG.md                   # Version history
‚îú‚îÄ‚îÄ CLAUDE.md                      # Claude Code guidance
‚îú‚îÄ‚îÄ pyproject.toml                 # Project configuration
‚îú‚îÄ‚îÄ .gitignore
‚îî‚îÄ‚îÄ LICENSE
```

---

## üìö Documentation
- **[docs/Manual.md](docs/Manual.md)** ‚Üí Complete JSON configuration manual (NEW in v3.0!)
  - Comprehensive guide to all configuration files
  - All 8 backend types explained with examples
  - Form specification reference (20 field types)
  - Migration workflows and best practices
- [docs/prompts.md](docs/prompts.md) ‚Üí contains the exact prompts used and AI responses.
  > ‚ö†Ô∏è All prompts are **kept in Portuguese** to preserve the originality of the author's interaction with the AI.
- [docs/learning_notes.md](docs/learning_notes.md) ‚Üí author's notes and reflections while learning.
- [docs/roadmap.md](docs/roadmap.md) ‚Üí planned next steps and evolution of the project.
- [docs/dynamic_forms.md](docs/dynamic_forms.md) ‚Üí complete guide on creating dynamic forms.
- [docs/plano_persistencia.md](docs/plano_persistencia.md) ‚Üí persistence system architecture plan (v3.0).  

---

## ‚ñ∂Ô∏è How to Run
Clone the repository and install dependencies:

```bash
git clone https://github.com/<your-username>/VibeCForms.git
cd VibeCForms
uv sync
uv run pre-commit install  # Install git hooks for code quality checks
```

### Run the application (development mode)
```bash
uv run hatch run dev
```

### Run the application (production mode with Gunicorn)
```bash
uv run hatch run serve
```

Access in your browser:
- http://localhost:5000/ (main page with all forms displayed as cards)
- http://localhost:5000/contatos (contacts form)
- http://localhost:5000/produtos (products form)
- http://localhost:5000/financeiro/contas (nested form example)

The application features:
- **Main Page**: Landing page with all available forms as interactive cards
- **Sidebar Menu**: Persistent left menu with hierarchical navigation (hover over folders to reveal submenus)
- **Dynamic Discovery**: All forms in `src/specs/` are automatically detected and displayed

### Run tests
```bash
uv run hatch run test
```

### Format code
```bash
uv run hatch run format
```

### Check code formatting
```bash
uv run hatch run lint
```

### Run pre-commit hooks
```bash
uv run hatch run check
```

### Creating Your Own Form

**Simple Form (Root Level):**
1. Create a JSON spec file in `src/specs/<form_name>.json`
2. Access `http://localhost:5000/<form_name>`
3. It will appear on the main page and in the sidebar menu

**Organized Form (In Category):**
1. Create a folder in `src/specs/<category>/`
2. Create a JSON spec file in `src/specs/<category>/<form_name>.json`
3. Access `http://localhost:5000/<category>/<form_name>`
4. It will appear under the category folder in the sidebar (hover to reveal)

**Multi-level Organization:**
- You can nest folders indefinitely: `src/specs/rh/departamentos/areas.json`
- Access via: `http://localhost:5000/rh/departamentos/areas`
- Submenus will appear when hovering over parent folders

**Automatic Features:**
- Forms are automatically discovered when you add new spec files
- Icons are assigned based on folder names (financeiro ‚Üí üí≤, rh ‚Üí üë•)
- Categories are displayed on the main page cards
- Active menu items are highlighted

See [docs/dynamic_forms.md](docs/dynamic_forms.md) for detailed JSON spec format and examples.

---

## ü§ù Contributing

Contributions are welcome!
You can:

Suggest improvements,

Fix issues,

Improve documentation,

Or help evolve towards dynamic forms.

---

## üìå Personal Note

This is my first open-source project.
I am learning as I build, and my goal is to share both the code and the journey of using AI to develop software from scratch.

---

## üåç Portugu√™s (Resumo)

VibeCForms √© um projeto open source em Python que explora o Vibe Coding, ou seja, programa√ß√£o conduzida por IA.

**Funcionalidades Implementadas:**

**Vers√£o 3.0 - Sistema de Persist√™ncia Plug√°vel:**
- ‚úÖ Suporte a 8 backends de armazenamento (TXT, SQLite, MySQL, PostgreSQL, MongoDB, CSV, JSON, XML)
- ‚úÖ Configura√ß√£o via `persistence.json` sem alterar c√≥digo
- ‚úÖ Migra√ß√£o autom√°tica de dados entre backends
- ‚úÖ Detec√ß√£o de mudan√ßas em schemas com confirma√ß√£o de usu√°rio
- ‚úÖ Backup autom√°tico antes de migra√ß√µes
- ‚úÖ 40 registros migrados com sucesso (contatos: 23, produtos: 17)
- ‚úÖ 29 novos testes unit√°rios (41 total passando)
- ‚úÖ Novo manual completo de configura√ß√£o JSON (470+ linhas)

**Melhorias Recentes (Vers√£o 2.1):**
- ‚úÖ Suporte a √≠cones personalizados nos specs dos formul√°rios
- ‚úÖ Sistema de configura√ß√£o de pastas via arquivos `_folder.json`
- ‚úÖ Sistema de templates Jinja2 separados do c√≥digo Python
- ‚úÖ Redu√ß√£o de 36.5% no tamanho do c√≥digo principal (925 ‚Üí 587 linhas)

**Funcionalidades Principais:**
- ‚úÖ Sistema de formul√°rios din√¢micos baseados em especifica√ß√µes JSON
- ‚úÖ P√°gina inicial com cards interativos de todos os formul√°rios
- ‚úÖ Menu lateral persistente com navega√ß√£o hier√°rquica
- ‚úÖ Suporte a m√∫ltiplos n√≠veis de submenus (pastas como categorias)
- ‚úÖ Descoberta autom√°tica de formul√°rios via varredura de diret√≥rios
- ‚úÖ √çcones customiz√°veis para formul√°rios e pastas
- ‚úÖ CRUD completo (criar, ler, atualizar, deletar) para cada formul√°rio
- ‚úÖ Valida√ß√µes din√¢micas baseadas nas especifica√ß√µes
- ‚úÖ 20 tipos de campos HTML5 suportados
- ‚úÖ 41 testes unit√°rios (todos passando)

üìå Toda a documenta√ß√£o de prompts est√° mantida em portugu√™s para preservar a originalidade do que foi solicitado √† IA.
üìå Este √© o meu primeiro projeto publicado, criado totalmente com ferramentas gratuitas.
üìå O projeto evoluiu de um CRUD simples para um sistema completo de gerenciamento de formul√°rios com navega√ß√£o hier√°rquica e persist√™ncia plug√°vel.
üìå Serve como guia pr√°tico para iniciantes que queiram aprender Vibe Coding ‚Äî programa√ß√£o com IA.

